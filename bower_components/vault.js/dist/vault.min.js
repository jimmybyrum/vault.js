!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Vault=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";var c=a("./lib/browser").Cookie,d=a("./lib/browser").Local,e=a("./lib/browser").Session;b.exports={Cookie:c,Local:d,Session:e,set:function(a,b,c){return c&&c.expires?d.set(a,b,c):e.set(a,b,c)},get:function(a){var b=e.get(a);if(void 0!==b)return b;var f=d.get(a);return void 0!==f?f:c.get(a)},list:function(a){console.log("--== Local ==--"),d.list(a),console.log("--== Session ==--"),e.list(a),console.log("--== Cookie ==--"),c.list(a)},getLists:function(){return{Local:d.getList(),Session:e.getList(),Cookie:c.getList()}},remove:function(a){d.remove(a),e.remove(a),c.remove(a)},clear:function(){d.clear(),e.clear(),c.clear()}}},{"./lib/browser":2}],2:[function(a,b){"use strict";var c=a("../package.json"),d=a("./meta"),e=a("./cookie"),f=a("./prepare"),g=a("./parse"),h=function(a){var b;try{b=window[a];try{{b.foo}}catch(h){b=void 0}}catch(h){b=void 0}return b?{version:c.version,type:a,get:function(a,c){if(b[a]){var e=d.checkKeyMeta(b,a);if(e)return c;var f=g(b[a]);return f.value||f}return c},getAndRemove:function(a){var b=this.get(a);return this.remove(a),b},getList:function(){var a=[];for(var c in b){var d={};d[c]=this.get(c),a.push(d)}return a},set:function(c,e,g){try{return"sessionStorage"===a&&g&&g.expires&&delete g.expires,d.setKeyMeta(b,c,g),b.setItem(c,f(e))}catch(h){console.warn("Vault: I cannot write to localStoarge even though localStorage is supported. Perhaps you are using your browser in private mode? Here is the error: ",h)}},remove:function(a){return d.clearKeyMeta(b,a),b.removeItem(a)},clear:function(){return b.clear()},list:function(c){var d,e=b.length;if(0===e)return void console.log("0 items in "+a);for(d in b){var f=c?g(b[d]):this.get(d);console.log(d,"=",f)}}}:e};b.exports={Local:h("localStorage"),Session:h("sessionStorage"),Cookie:e}},{"../package.json":9,"./cookie":4,"./meta":6,"./parse":7,"./prepare":8}],3:[function(a,b){"use strict";b.exports={vaultFile:"/.vault.json",vaultData:"__vaultData"}},{}],4:[function(a,b){"use strict";var c=a("../package.json"),d=a("./prepare"),e=a("./parse"),f=a("./getExpires"),g={version:c.version,type:"cookie",get:function(a,b){for(var c=document.cookie.split(";"),d=c.length,f=0;d>f;f++){var g=c[f].split("=");if(g[0]=g[0].replace(/^[ ]/,""),g[0]===a)return e(g[1])}return b},getAndRemove:function(a,b){var c=this.get(a);return this.remove(a,b),c},getList:function(){var a=[];if(""!==document.cookie)for(var b=document.cookie.split(";"),c=b.length,d=0;c>d;d++){var f=b[d].split("=");f[0]=f[0].replace(/^[ ]/,"");var g={};g[f[0]]=e(f[1]),a.push(g)}return a},set:function(a,b,c){var e="";if(c&&c.expires){var g=f(c);e="; expires="+g.toUTCString()}var h="";c&&c.max_age&&(h="; max-age="+c.max_age);var i="";c&&c.domain&&(i="; domain="+c.domain);var j="";c&&c.path&&(j="; path="+c.path);var k=c&&c.secure?"; secure":"";b=d(b)+j+i+h+e+k,console.log('Vault: set cookie "'+a+'": '+b),document.cookie=a+"="+b},remove:function(a,b){b||(b={}),b.expires="1970-01-01T00:00:01Z",this.set(a,"",b)},clear:function(){for(var a=document.cookie.split(";"),b=a.length,c=0;b>c;c++){var d=a[c].split("=");d[0]=d[0].replace(/^[ ]/,""),this.remove(d[0])}},list:function(){var a=document.cookie.split(";"),b=a.length;if(""===document.cookie||0===b)return void console.log("0 cookies");for(var c=0;b>c;c++){var d=a[c].split("=");d[0]=d[0].replace(/^[ ]/,""),console.log(d[0],"=",e(d[1]))}}};b.exports=g},{"../package.json":9,"./getExpires":5,"./parse":7,"./prepare":8}],5:[function(a,b){"use strict";b.exports=function(a){if(a.expires.match(/^(\+|\-)\d+\s\w+/)){var b=new Date,c=a.expires.substring(0,1),d=a.expires.substring(1).split(" "),e=parseInt(d[0],10),f=d[1];switch(f){case"millisecond":case"milliseconds":f="Milliseconds";break;case"second":case"seconds":f="Seconds";break;case"minute":case"minutes":f="Minutes";break;case"hour":case"hours":f="Hours";break;case"day":case"days":f="Date";break;case"month":case"months":f="Month";break;case"year":case"years":f="FullYear"}return b["set"+f]("-"===c?b["get"+f]()-e:b["get"+f]()+e),b}return new Date(a.expires)}},{}],6:[function(a,b){"use strict";var c=a("./config"),d=a("./prepare"),e=a("./parse"),f=a("./getExpires"),g=function(a){var b=a.getItem(c.vaultData);return b||(b={}),"string"==typeof b&&(b=JSON.parse(b)),b},h=function(a,b,e){if(b===c.vaultData)return!1;e=e||{};var h=g(a);if(h[b]||(h[b]={}),e.expires){var i=f(e);h[b].expires=i&&i.valueOf()}else delete h[b].expires;e.path?h[b].path=e.path:delete h[b].path,a.setItem(c.vaultData,d(h))},i=function(a,b){if(b===c.vaultData)return!1;try{var d=g(a);return d[b]}catch(e){return void 0}},j=function(a,b){if(b===c.vaultData)return!1;try{var e=g(a);delete e[b],a.setItem(c.vaultData,d(e))}catch(f){}},k=function(a,b){if(b===c.vaultData)return!1;try{var d=e(a[b]),f=i(a,b);if(f){if(f.path&&"undefined"!=typeof window){var g=window.location.pathname||window.location.path;if(!g.match(f.path))return!0}if(!f.expires&&d&&d.expires&&(f.expires=d.expires),f.expires&&f.expires<=new Date){var h=new Date(f.expires).toString();return console.log("Removing expired item: "+b+". It expired on: "+h),j(a,b),a.removeItem(b),!0}}}catch(k){console.warn("Vault Error:",k)}return!1};b.exports={getData:g,setKeyMeta:h,getKeyMeta:i,clearKeyMeta:j,checkKeyMeta:k}},{"./config":3,"./getExpires":5,"./parse":7,"./prepare":8}],7:[function(a,b){"use strict";b.exports=function(a){if(null===a||void 0===a||"undefined"===a)return void 0;if("null"===a)return null;if(a===!0||"true"===a)return!0;if(a===!1||"false"===a)return!1;if(""!==a&&a!==a)return 1*a;if(a.indexOf&&(0===a.indexOf("{")||0===a.indexOf("[")))try{return JSON.parse(a)}catch(b){return console.warn("Parse error",a),a}return a}},{}],8:[function(a,b){"use strict";b.exports=function(a){if(!a.indexOf||0!==a.indexOf("{")&&0!==a.indexOf("[")||(a=JSON.parse(a)),"object"==typeof a)try{return JSON.stringify(a)}catch(b){console.warn("Prepare: JSON error",b)}return a}},{}],9:[function(a,b){b.exports={name:"vault.js",version:"0.1.11",description:"Key-Value Storage of true data types for the browser and node",main:"index.js",author:"Jimmy Byrum (https://github.com/jimmybyrum)",license:"MIT",repository:{type:"git",url:"git@github.com:jimmybyrum/vault.js.git"},bugs:{url:"https://github.com/jimmybyrum/vault.js/issues"},homepage:"http://jimmybyrum.github.io/vault.js/",scripts:{test:"alias gulp='node_modules/gulp/bin/gulp.js';gulp eslint;gulp mocha;",build:"alias gulp='node_modules/gulp/bin/gulp.js';gulp build && ls -al dist/"},keywords:["localStorage","sessionStorage","cookie","cookies","local","session","file","store","storage","key","value","key-value","json"],devDependencies:{gulp:"^3.8.10","gulp-browserify":"^0.5.1","gulp-clean":"^0.3.1","gulp-eslint":"^0.2.0","gulp-jsmin":"^0.1.4","gulp-md5-plus":"^0.1.6","gulp-mocha":"^2.1.3","gulp-rename":"^1.2.0","gulp-uglifyjs":"^0.5.0",mocha:"^2.2.5"}}},{}]},{},[1])(1)});