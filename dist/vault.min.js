!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Vault=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";var c=a("./package.json").version,d=a("./lib/browser").Cookie,e=a("./lib/browser").Local,f=a("./lib/browser").Session,g=a("./lib/memory"),h=a("./lib/cleanup");b.exports={version:c,Cookie:d,Local:e,Session:f,Memory:g,startCleanup:h.start,stopCleanup:h.stop,setIntervalLength:h.setIntervalLength,getIntervalLength:h.getIntervalLength,set:function(a,c,d){b.exports.remove(a);var h=d&&d.expires;"page"===h?g.set(a,c,d):"session"===h?f.set(a,c,d):e.set(a,c,d)},get:function(a){return g.get(a)||f.get(a)||e.get(a)||d.get(a)},list:function(a){console.log("--== Memory ==--"),g.list(a),console.log("----------------"),console.log("--== Session ==--"),f.list(a),console.log("----------------"),console.log("--== Local ==--"),e.list(a),console.log("----------------"),console.log("--== Cookie ==--"),d.list(a),console.log("----------------")},getLists:function(){return{Memory:g.getList(),Session:f.getList(),Local:e.getList(),Cookie:d.getList()}},remove:function(a){g.remove(a),f.remove(a),e.remove(a),d.remove(a)},clear:function(){g.clear(),f.clear(),e.clear(),d.clear()}},h.start([d,e,f,g])},{"./lib/browser":2,"./lib/cleanup":3,"./lib/memory":7,"./package.json":11}],2:[function(a,b){"use strict";var c=a("./meta"),d=a("./cookie"),e=a("./prepare"),f=a("./parse"),g=function(a){var b;try{b=window[a];try{{b.foo}}catch(g){b=void 0}}catch(g){b=void 0}return b?{type:a,get:function(a,d){if(b[a]){var e=c.checkKeyMeta(b,a);if(e)return d;var g=f(b[a]);return g&&g.value||g}return d},getAndRemove:function(a){var b=this.get(a);return this.remove(a),b},getList:function(){var a=[];for(var c in b){var d={},e=this.get(c);e&&(d[c]=e,a.push(d))}return a},set:function(a,d,f){if(!a)return console.warn("Vault: set was called with no key.",a);try{return c.setKeyMeta(b,a,f),b.setItem(a,e(d))}catch(g){console.warn("Vault: I cannot write to localStoarge even though localStorage is supported. Perhaps you are using your browser in private mode? Here is the error: ",g)}},remove:function(a){return c.clearKeyMeta(b,a),b.removeItem(a)},clear:function(){return b.clear()},list:function(c){var d,e=b.length;if(0===e)return void console.log("0 items in",a);for(d in b)if("__vaultData"!==d){var g=c?f(b[d]):this.get(d);console.log(d,"=",g)}}}:(console.warn("Vault: "+a+" is not suppored. I will attempt to use Cookies instead."),d)};b.exports={Local:g("localStorage"),Session:g("sessionStorage"),Cookie:d}},{"./cookie":5,"./meta":8,"./parse":9,"./prepare":10}],3:[function(a,b){"use strict";function c(a){!a&&i?a=i:i=a,d(a)}function d(a){a.forEach(function(a){try{a.getList()}catch(b){l||(l=!0,console.warn("interval error",b))}}),j&&(h=setTimeout(function(){d(a)},k))}function e(){j=!1,clearTimeout(h)}function f(){return k}function g(a){k=a}b.exports={start:c,stop:e,getIntervalLength:f,setIntervalLength:g};var h,i=[],j=!0,k=5e3,l=!1},{}],4:[function(a,b){"use strict";b.exports={vaultFile:"/.vault.json",vaultData:"__vaultData"}},{}],5:[function(a,b){"use strict";var c=a("./prepare"),d=a("./parse"),e=a("./getExpires"),f={type:"cookie",get:function(a,b){for(var c=document.cookie.split(";"),e=c.length,f=0;e>f;f++){var g=c[f].split("=");if(g[0]=g[0].replace(/^[ ]/,""),g[0]===a)return d(g[1])}return b},getAndRemove:function(a,b){var c=this.get(a);return this.remove(a,b),c},getList:function(){var a=[];if(""!==document.cookie)for(var b=document.cookie.split(";"),c=b.length,e=0;c>e;e++){var f=b[e].split("=");f[0]=f[0].replace(/^[ ]/,"");var g={};g[f[0]]=d(f[1]),a.push(g)}return a},set:function(a,b,d){if(!a)return console.warn("Vault: set was called with no key.",a);var f="";if(d&&d.expires){var g=e(d);f="; expires="+g.toUTCString()}var h="";d&&d.max_age&&(h="; max-age="+d.max_age);var i="";d&&d.domain&&(i="; domain="+d.domain);var j="";d&&d.path&&(j="; path="+d.path);var k=d&&d.secure?"; secure":"";b=c(b)+j+i+h+f+k,document.cookie=a+"="+b},remove:function(a,b){b||(b={}),b.expires="1970-01-01T00:00:01Z",this.set(a,"",b)},clear:function(){for(var a=document.cookie.split(";"),b=a.length,c=0;b>c;c++){var d=a[c].split("=");d[0]=d[0].replace(/^[ ]/,""),this.remove(d[0])}},list:function(){var a=document.cookie.split(";"),b=a.length;if(""===document.cookie||0===b)return void console.log("0 cookies");for(var c=0;b>c;c++){var e=a[c].split("=");e[0]=e[0].replace(/^[ ]/,""),console.log(e[0],"=",d(e[1]))}}};b.exports=f},{"./getExpires":6,"./parse":9,"./prepare":10}],6:[function(a,b){"use strict";b.exports=function(a){if(a.expires.match(/^(\+|\-)\d+\s\w+/)){var b=new Date,c=a.expires.substring(0,1),d=a.expires.substring(1).split(" "),e=parseInt(d[0],10),f=d[1];switch(f){case"millisecond":case"milliseconds":f="Milliseconds";break;case"second":case"seconds":f="Seconds";break;case"minute":case"minutes":f="Minutes";break;case"hour":case"hours":f="Hours";break;case"day":case"days":f="Date";break;case"month":case"months":f="Month";break;case"year":case"years":f="FullYear"}return b["set"+f]("-"===c?b["get"+f]()-e:b["get"+f]()+e),b}return new Date(a.expires)}},{}],7:[function(a,b){"use strict";var c=a("./meta"),d=a("./parse"),e={},f={type:"Memory",get:function(a,b){var f=c.checkKeyMeta(this,a);return f?b:d(e[a])||b},getItem:function(a,b){return this.get(a,b)},getAndRemove:function(a){var b=e[a];return delete e[a],b},getList:function(){var a=[];for(var b in e){var c={},d=this.get(b);d&&(c[b]=d,a.push(c))}return a},set:function(a,b,d){return a?(e[a]=b,c.setKeyMeta(this,a,d),e[a]):console.warn("Vault: set was called with no key.",a)},setItem:function(a,b,c){return this.set(a,b,c)},remove:function(a){try{delete e[a]}catch(b){}},removeItem:function(a){this.remove(a)},clear:function(){e={}},list:function(){for(var a in e)"__vaultData"!==a&&console.log(a,"=",e[a])}};b.exports=f},{"./meta":8,"./parse":9}],8:[function(a,b){"use strict";var c=a("./config"),d=a("./prepare"),e=a("./parse"),f=a("./getExpires"),g=function(a){var b=a.getItem(c.vaultData);return b||(b={}),"string"==typeof b&&(b=JSON.parse(b)),b},h=function(a,b,e){if(b===c.vaultData)return!1;e=e||{};var h=g(a);if(h[b]||(h[b]={}),e.expires){var i=f(e);h[b].expires=i&&i.valueOf()}else delete h[b].expires;e.path?h[b].path=e.path:delete h[b].path,a.setItem(c.vaultData,d(h))},i=function(a,b){if(b===c.vaultData)return!1;try{var d=g(a);return d[b]}catch(e){return void 0}},j=function(a,b){if(b===c.vaultData)return!1;try{var e=g(a);delete e[b],a.setItem(c.vaultData,d(e))}catch(f){}},k=function(a,b){if(b===c.vaultData)return!1;try{var d=e(a[b]),f=i(a,b);if(f){if(f.path&&"undefined"!=typeof window){var g=window.location.pathname||window.location.path;if(!g.match(f.path))return!0}if(!f.expires&&d&&d.expires&&(f.expires=d.expires),f.expires&&f.expires<=new Date){var h=new Date(f.expires).toString();return console.log("Removing expired item: "+b+". It expired on: "+h),j(a,b),a.removeItem(b),!0}}}catch(k){console.warn("Vault Error:",k)}return!1};b.exports={getData:g,setKeyMeta:h,getKeyMeta:i,clearKeyMeta:j,checkKeyMeta:k}},{"./config":4,"./getExpires":6,"./parse":9,"./prepare":10}],9:[function(a,b){"use strict";b.exports=function(a){if(null===a||void 0===a||"undefined"===a)return void 0;if("null"===a)return null;if(a===!0||"true"===a)return!0;if(a===!1||"false"===a)return!1;if(""!==a&&!isNaN(Number(a)))return 1*a;if(a.indexOf&&(0===a.indexOf("{")||0===a.indexOf("[")))try{return JSON.parse(a)}catch(b){return console.warn("Parse error",a),a}return a}},{}],10:[function(a,b){"use strict";b.exports=function(a){if(void 0===a||null===a)return a;if(a&&a.indexOf&&(0===a.indexOf("{")||0===a.indexOf("["))&&(a=JSON.parse(a)),"object"==typeof a)try{return JSON.stringify(a)}catch(b){console.warn("Prepare: JSON error",b)}return a}},{}],11:[function(a,b){b.exports={name:"vault.js",version:"1.0.0",description:"Key-Value Storage of true data types for the browser and node",main:"index.js",author:"Jimmy Byrum (https://github.com/jimmybyrum)",license:"MIT",repository:{type:"git",url:"git@github.com:jimmybyrum/vault.js.git"},bugs:{url:"https://github.com/jimmybyrum/vault.js/issues"},homepage:"http://jimmybyrum.github.io/vault.js/",scripts:{test:"alias gulp='node_modules/gulp/bin/gulp.js';gulp eslint;mocha ./test;",build:"alias gulp='node_modules/gulp/bin/gulp.js';gulp build && ls -al dist/"},keywords:["localStorage","sessionStorage","cookie","cookies","local","session","file","store","storage","key","value","key-value","json"],devDependencies:{gulp:"^3.8.10","gulp-browserify":"^0.5.1","gulp-clean":"^0.3.1","gulp-eslint":"^0.2.0","gulp-jsmin":"^0.1.4","gulp-md5-plus":"^0.1.6","gulp-rename":"^1.2.0","gulp-uglifyjs":"^0.5.0",mocha:"^2.2.5"}}},{}]},{},[1])(1)});