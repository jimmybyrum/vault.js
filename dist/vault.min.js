!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Vault=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("./package.json").version,e=a("./lib/browser").Cookie,f=a("./lib/browser").Local,g=a("./lib/browser").Session,h=a("./lib/memory"),i=a("./lib/cleanup");b.exports={version:d,Cookie:e,Local:f,Session:g,Memory:h,startCleanup:i.start,stopCleanup:i.stop,setIntervalLength:i.setIntervalLength,getIntervalLength:i.getIntervalLength,set:function(a,c,d){b.exports.remove(a);var e=d&&d.expires;"page"===e?h.set(a,c,d):"session"===e?g.set(a,c,d):f.set(a,c,d)},get:function(a){return h.get(a)||g.get(a)||f.get(a)||e.get(a)},list:function(a){console.log("--== Memory ==--"),h.list(a),console.log("----------------"),console.log("--== Session ==--"),g.list(a),console.log("----------------"),console.log("--== Local ==--"),f.list(a),console.log("----------------"),console.log("--== Cookie ==--"),e.list(a),console.log("----------------")},getLists:function(){return{Memory:h.getList(),Session:g.getList(),Local:f.getList(),Cookie:e.getList()}},remove:function(a){h.remove(a),g.remove(a),f.remove(a),e.remove(a)},clear:function(){h.clear(),g.clear(),f.clear(),e.clear()}},i.start([e,f,g,h])},{"./lib/browser":2,"./lib/cleanup":3,"./lib/memory":7,"./package.json":11}],2:[function(a,b,c){"use strict";var d=a("./meta"),e=a("./cookie"),f=a("./prepare"),g=a("./parse"),h=function(a){var b;try{b=window[a];var c="vault-test";try{b.foo;b.setItem(c,"bar"),b.removeItem(c)}catch(a){b=void 0}}catch(a){b=void 0}return b?{type:a,get:function(a,c){if(b[a]){var e=d.checkKeyMeta(b,a);if(e)return c;var f=g(b[a]);return f&&f.value||f}return c},getAndRemove:function(a){var b=this.get(a);return this.remove(a),b},getList:function(){var a=[];for(var c in b){var d={},e=this.get(c);e&&(d[c]=e,a.push(d))}return a},set:function(a,c,e){if(!a)return console.warn("Vault: set was called with no key.",a);try{return d.setKeyMeta(b,a,e),b.setItem(a,f(c))}catch(a){console.warn("Vault: I cannot write to localStoarge even though localStorage is supported. Perhaps you are using your browser in private mode? Here is the error: ",a)}},remove:function(a){return d.clearKeyMeta(b,a),b.removeItem(a)},clear:function(){return b.clear()},list:function(c){var d,e=b.length;if(0===e)return void console.log("0 items in",a);for(d in b)if("__vaultData"!==d){var f=c?g(b[d]):this.get(d);console.log(d,"=",f)}}}:(console.warn("Vault: "+a+" is not suppored. I will attempt to use Cookies instead."),e)};b.exports={Local:h("localStorage"),Session:h("sessionStorage"),Cookie:e}},{"./cookie":5,"./meta":8,"./parse":9,"./prepare":10}],3:[function(a,b,c){"use strict";function d(a){!a&&j?a=j:j=a,e(a)}function e(a){a.forEach(function(a){try{a.getList()}catch(a){m||(m=!0,console.warn("interval error",a))}}),k&&(i=setTimeout(function(){e(a)},l))}function f(){k=!1,clearTimeout(i)}function g(){return l}function h(a){l=a}b.exports={start:d,stop:f,getIntervalLength:g,setIntervalLength:h};var i,j=[],k=!0,l=5e3,m=!1},{}],4:[function(a,b,c){"use strict";b.exports={vaultFile:"/.vault.json",vaultData:"__vaultData"}},{}],5:[function(a,b,c){"use strict";var d=a("./prepare"),e=a("./parse"),f=a("./getExpires"),g={type:"cookie",get:function(a,b){for(var c=document.cookie.split(";"),d=c.length,f=0;f<d;f++){var g=c[f].split("=");if(g[0]=g[0].replace(/^[ ]/,""),g[0]===a)return e(decodeURIComponent(g[1]))}return b},getAndRemove:function(a,b){var c=this.get(a);return this.remove(a,b),c},getList:function(){var a=[];if(""!==document.cookie)for(var b=document.cookie.split(";"),c=b.length,d=0;d<c;d++){var f=b[d].split("=");f[0]=f[0].replace(/^[ ]/,"");var g={};g[f[0]]=e(f[1]),a.push(g)}return a},set:function(a,b,c){if(!a)return console.warn("Vault: set was called with no key.",a);var e="";if(c&&c.expires){var g=f(c);e="; expires="+g.toUTCString()}var h="";c&&c.max_age&&(h="; max-age="+c.max_age);var i="";c&&c.domain&&(i="; domain="+c.domain);var j="";c&&c.path&&(j="; path="+c.path);var k=c&&c.secure?"; secure":"";b=encodeURIComponent(d(b))+j+i+h+e+k,document.cookie=a+"="+b},remove:function(a,b){b||(b={}),b.expires="1970-01-01T00:00:01Z",this.set(a,"",b)},clear:function(){for(var a=document.cookie.split(";"),b=a.length,c=0;c<b;c++){var d=a[c].split("=");d[0]=d[0].replace(/^[ ]/,""),this.remove(d[0])}},list:function(){var a=document.cookie.split(";"),b=a.length;if(""===document.cookie||0===b)return void console.log("0 cookies");for(var c=0;c<b;c++){var d=a[c].split("=");d[0]=d[0].replace(/^[ ]/,""),console.log(d[0],"=",e(d[1]))}}};b.exports=g},{"./getExpires":6,"./parse":9,"./prepare":10}],6:[function(a,b,c){"use strict";b.exports=function(a){if(a.expires.match(/^(\+|\-)\d+\s\w+/)){var b=new Date,c=a.expires.substring(0,1),d=a.expires.substring(1).split(" "),e=parseInt(d[0],10),f=d[1];switch(f){case"millisecond":case"milliseconds":f="Milliseconds";break;case"second":case"seconds":f="Seconds";break;case"minute":case"minutes":f="Minutes";break;case"hour":case"hours":f="Hours";break;case"day":case"days":f="Date";break;case"month":case"months":f="Month";break;case"year":case"years":f="FullYear"}return"-"===c?b["set"+f](b["get"+f]()-e):b["set"+f](b["get"+f]()+e),b}return new Date(a.expires)}},{}],7:[function(a,b,c){"use strict";var d=a("./meta"),e=a("./parse"),f={},g={type:"Memory",get:function(a,b){var c=d.checkKeyMeta(this,a);return c?b:e(f[a])||b},getItem:function(a,b){return this.get(a,b)},getAndRemove:function(a){var b=f[a];return delete f[a],b},getList:function(){var a=[];for(var b in f){var c={},d=this.get(b);d&&(c[b]=d,a.push(c))}return a},set:function(a,b,c){return a?(f[a]=b,d.setKeyMeta(this,a,c),f[a]):console.warn("Vault: set was called with no key.",a)},setItem:function(a,b,c){return this.set(a,b,c)},remove:function(a){try{delete f[a]}catch(a){}},removeItem:function(a){this.remove(a)},clear:function(){f={}},list:function(){for(var a in f)"__vaultData"!==a&&console.log(a,"=",f[a])}};b.exports=g},{"./meta":8,"./parse":9}],8:[function(a,b,c){"use strict";var d=a("./config"),e=a("./prepare"),f=a("./parse"),g=a("./getExpires"),h=function(a){var b=a.getItem(d.vaultData);return b||(b={}),"string"==typeof b&&(b=JSON.parse(b)),b},i=function(a,b,c){if(b===d.vaultData)return!1;c=c||{};var f=h(a);if(f[b]||(f[b]={}),c.expires){var i=g(c);f[b].expires=i&&i.valueOf()}else delete f[b].expires;c.path?f[b].path=c.path:delete f[b].path,a.setItem(d.vaultData,e(f))},j=function(a,b){if(b===d.vaultData)return!1;try{var c=h(a);return c[b]}catch(a){return}},k=function(a,b){if(b===d.vaultData)return!1;try{var c=h(a);delete c[b],a.setItem(d.vaultData,e(c))}catch(a){}},l=function(a,b){if(b===d.vaultData)return!1;try{var c=f(a[b]),e=j(a,b);if(e){if(e.path&&"undefined"!=typeof window){var g=window.location.pathname||window.location.path;if(!g.match(e.path))return!0}if(!e.expires&&c&&c.expires&&(e.expires=c.expires),e.expires&&e.expires<=new Date){var h=new Date(e.expires).toString();return console.log("Removing expired item: "+b+". It expired on: "+h),k(a,b),a.removeItem(b),!0}}}catch(a){console.warn("Vault Error:",a)}return!1};b.exports={getData:h,setKeyMeta:i,getKeyMeta:j,clearKeyMeta:k,checkKeyMeta:l}},{"./config":4,"./getExpires":6,"./parse":9,"./prepare":10}],9:[function(a,b,c){"use strict";b.exports=function(a){if(null!==a&&void 0!==a&&"undefined"!==a){if("null"===a)return null;if(a===!0||"true"===a)return!0;if(a===!1||"false"===a)return!1;if(""!==a&&!isNaN(Number(a)))return 1*a;if(a.indexOf&&(0===a.indexOf("{")||0===a.indexOf("[")))try{return JSON.parse(a)}catch(b){return console.warn("Parse error",a),a}return a}}},{}],10:[function(a,b,c){"use strict";b.exports=function(a){if(void 0===a||null===a)return a;if(a&&a.indexOf&&(0===a.indexOf("{")||0===a.indexOf("["))&&(a=JSON.parse(a)),"object"==typeof a)try{return JSON.stringify(a)}catch(a){console.warn("Prepare: JSON error",a)}return a}},{}],11:[function(a,b,c){b.exports={name:"vault.js",version:"1.0.1",description:"Key-Value Storage of true data types for the browser and node",main:"index.js",author:"Jimmy Byrum (https://github.com/jimmybyrum)",license:"MIT",repository:{type:"git",url:"git@github.com:jimmybyrum/vault.js.git"},bugs:{url:"https://github.com/jimmybyrum/vault.js/issues"},homepage:"http://jimmybyrum.github.io/vault.js/",scripts:{test:"alias gulp='node_modules/gulp/bin/gulp.js';gulp eslint;mocha ./test;",build:"alias gulp='node_modules/gulp/bin/gulp.js';gulp build && ls -al dist/"},keywords:["localStorage","sessionStorage","cookie","cookies","local","session","file","store","storage","key","value","key-value","json"],devDependencies:{gulp:"^3.8.10","gulp-browserify":"^0.5.1","gulp-clean":"^0.3.1","gulp-eslint":"^0.2.0","gulp-jsmin":"^0.1.4","gulp-md5-plus":"^0.1.6","gulp-rename":"^1.2.0","gulp-uglifyjs":"^0.5.0",mocha:"^2.2.5"}}},{}]},{},[1])(1)});